<div class="container d-flex flex-column justify-content-center align-items-center min-vh-100" style="gap: 10px;">
  @if (tipo == 0) {
    <div class="d-flex justify-content-between align-items-center w-100 px-3" style="max-width: 300px;">
      <button type="button" class="btn-close ms-auto" aria-label="Close" (click)="goHome()"></button>
    </div>
    <div class="d-flex justify-content-between align-items-center w-100 px-3" style="max-width: 300px;">
      <h2 class="text-center m-0 flex-grow-1">Registrati come</h2>
    </div>
    <div class="btn-group mb-2" role="group" aria-label="Basic example" *ngIf="!tipo" style="gap: 5px;">
      <button type="button" class="btn btn-primary" style="width: 100px;" (click)="tipo = 1">Utente</button>
      <button type="button" class="btn btn-primary" style="width: 100px;" (click)="tipo = 2">Azienda</button>
    </div>
  } @else {
    <div class="card" style="width: 20rem; position: relative;">
      <button type="button" class="btn-close" style="position: absolute; top: 10px; right: 10px;" aria-label="Close" (click)="tipo = 0"></button>
      <div class="card-body">
        <form [formGroup]="applyForm" (ngSubmit)="tipo == 1 ? registerUser() : registerAgency()">
          <div class="mb-2">
            <label for="nome" class="form-label">Nome</label>
            <input id="nome" type="text" class="form-control" formControlName="nome" (click)="registerError = false">
          </div>

          @if (tipo == 1) {
            <div class="mb-2">
              <label for="cognome" class="form-label">Cognome</label>
              <input id="cognome" type="text" class="form-control" formControlName="cognome" (click)="registerError = false">
            </div>
          }

          <div class="mb-2">
            <label for="username" class="form-label">Username</label>
            <input id="username" type="text" class="form-control" formControlName="username" (click)="registerError = false">
          </div>

          <div class="mb-2">
            <label for="email" class="form-label">Email</label>
            <input id="email" type="email" class="form-control" formControlName="email" (click)="registerError = false">
          </div>

          <div class="row mb-2">
            <div class="col-6">
              <label for="password" class="form-label">Password</label>
              <input id="password" type="password" class="form-control" formControlName="password" (click)="registerError = false">
            </div>

            <div class="col-6">
              <label for="ripetiPassword" class="form-label">Ripeti Password</label>
              <input id="ripetiPassword" type="password" class="form-control" formControlName="ripetiPassword" (click)="registerError = false">
            </div>
          </div>

          <div class="mb-2">
            <label for="citta" class="form-label">Citt√†</label>
            <input id="citta" type="text" class="form-control" formControlName="citta" (click)="registerError = false">
          </div>

          @if (tipo == 2) {
            <div class="row mb-2">
              <div class="col-6">
                <label for="indirizzo" class="form-label">Indirizzo</label>
                <input id="indirizzo" type="text" class="form-control" formControlName="indirizzo" (click)="registerError = false">
              </div>

              <div class="col-6">
                <label for="recapito" class="form-label">Recapito</label>
                <input id="recapito" type="text" class="form-control" formControlName="recapito" (click)="registerError = false">
              </div>
            </div>

            <div class="mb-2">
              <label for="partitaIVA" class="form-label">Partita IVA</label>
              <input id="partitaIVA" type="text" class="form-control" formControlName="partitaIVA" (click)="registerError = false">
            </div>
          }

          @if (registerError) {
            <div class="alert alert-danger text-center">
              Credenziali non complete. Riprova.
            </div>
          }

          <button type="submit" class="btn btn-primary w-100 mt-2">Registrati</button>
        </form>
      </div>
    </div>
  }
</div>
